# Yono777 AI Customer Support System

A professional AI customer support chatbot for Yono777 gaming platform.

## Features

- 24/7 customer service
- Intelligent issue classification
- Professional and polite responses
- Escalation handling
- Support for deposits, withdrawals, accounts, bonuses, and more

## Installation

```bash
npm install
```

## Running the Application

```bash
npm start
```

For development with auto-reload:

```bash
npm run dev
```

## Usage

1. Start the server (default port: 3000)
2. Open `index.html` in your browser or serve it through the Express server
3. Start chatting with the AI support agent

## API Endpoints

- `POST /api/chat` - Send a message to the AI agent
- `GET /` - Serve the chat interface

## Configuration

### Environment Variables

Create a `.env` file in the root directory with the following variables:

```env
# Server Configuration
PORT=3000

# Telegram Bot (Optional)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_GROUP_ID=your_telegram_group_chat_id_here

# OpenAI Integration (Optional - for enhanced AI responses)
OPENAI_API_KEY=your_openai_api_key_here
USE_OPENAI=true
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=200

# Staff Panel (Optional)
STAFF_USERNAME=admin
STAFF_PASSWORD=admin123
```

### OpenAI Integration (REQUIRED)

The system **requires** OpenAI integration for all AI responses. All customer responses are generated by OpenAI for natural, context-aware conversations.

#### To Setup OpenAI (REQUIRED):

1. **Get an OpenAI API Key:**
   - Sign up at [OpenAI](https://platform.openai.com/)
   - Go to API Keys section
   - Create a new API key
   - Copy the key

2. **Add to `.env` file:**
   ```env
   OPENAI_API_KEY=sk-your-api-key-here
   USE_OPENAI=true
   OPENAI_MODEL=gpt-3.5-turbo  # or gpt-4, gpt-4-turbo, etc.
   OPENAI_MAX_TOKENS=200       # Maximum response length
   ```

3. **Install OpenAI package:**
   ```bash
   npm install openai
   ```

4. **Restart the server:**
   ```bash
   npm start
   ```

#### How It Works:

- **ALL responses are generated by OpenAI** - no rule-based fallback
- **Smart Context:** OpenAI receives:
  - Full conversation history
  - User sentiment and emotion analysis
  - Issue type classification
  - Order number status (found/not found in database)
  - Receipt upload status
  - Transaction status
- **Context-Aware:** Responses adapt based on:
  - User's emotional state (frustrated, worried, happy, confused)
  - Urgency level
  - Transaction status
  - Previous conversation topics
- **Multilingual:** Supports English, Hindi, Telugu, and more with natural responses

#### Benefits:

- ✅ Natural, human-like conversations
- ✅ Better understanding of user intent and context
- ✅ Adapts to user emotions and urgency
- ✅ Handles complex queries and edge cases
- ✅ Multilingual support with native-quality responses
- ✅ Learns from conversation history

#### Cost Considerations:

- OpenAI API usage is charged per token
- `gpt-3.5-turbo` is cost-effective (~$0.002 per 1K tokens)
- `gpt-4` is more expensive but higher quality
- Set `OPENAI_MAX_TOKENS` to control costs (default: 200 tokens)
- Average conversation uses ~100-300 tokens per response

### Setting up Telegram Bot

1. Create a Telegram bot by messaging [@BotFather](https://t.me/botfather) on Telegram
2. Use `/newbot` command and follow instructions
3. Copy the bot token and add it to `.env` as `TELEGRAM_BOT_TOKEN`
4. Create a Telegram group for notifications
5. Add your bot to the group
6. Get the group chat ID (you can use [@userinfobot](https://t.me/userinfobot) or send a message and check the bot API)
7. Add the group chat ID to `.env` as `TELEGRAM_GROUP_ID`

### Features

- **Deposit Problem Detection**: Automatically detects deposit issues from user messages
- **Order Number Extraction**: Extracts order numbers from user messages
- **Telegram Notifications**: Sends push notifications to Telegram group when deposit problems are detected
- **Receipt Upload**: API endpoint to upload and send receipt images to Telegram group

### API Endpoints

- `POST /api/chat` - Send a message to the AI agent
- `POST /api/upload-receipt` - Upload receipt image (query params: `userId`, `orderNumber`)
- `GET /api/deposit-problem/:userId` - Get deposit problem status for a user
- `GET /` - Serve the chat interface

